include ../layouts/_Settings.pug
include ../data/_news.pug

mixin NewsDetail(index)
  -
    //- const data = newsList[index];
    const data = newsList.find(function(item) {
      return (item.path || item.id) === index;
    });

    const jsonLd = `
      {
        "@context": "https://schema.org",
        "@type": "NewsArticle",
        "url": "http://www.bbc.com/news/world-us-canada-39324587",
        "publisher":{
            "@type":"Organization",
            "name":"BBC News",
            "logo":"http://www.bbc.co.uk/news/special/2015/newsspec_10857/bbc_news_logo.png?cb=1"
        },
        "headline": "${data.title}",
        "mainEntityOfPage": "http://www.bbc.com/news/world-us-canada-39324587",
        "articleBody": "${data.content}",
        "image": "${baseUrl}${basePath}/${data.image}",
        "datePublished":"2017-03-20T20:30:54+00:00"
      }
    `

  doctype html
  html(lang="en")
    head
      - 
        path = `/news/${index}.html`
        pageTitle = data.title;
        infoTitle = '';
        description = data.description;

      include ../layouts/_Head.pug

      script(type="application/ld+json")
        !=jsonLd

    body
      include ../layouts/_Header.pug

      main(class="l-main")
        section(class="l-news-detail")
          div(class="container")
            div(class="l-news-detail__title-wrap")
              h1(class="text-2xl") #{data.title}
              span(class="o-text-lg") #{data.date}
            div(class="l-news-detail__content")
              img(
                data-src=`${basePath}/${data.image}` alt=data.title
                class="js-lazy"
              )
              //- u-editor 遇到後台編輯器，還原 reset 設定值
              //- !=data.content 這樣寫 pug 才能生成 html 結構
              div(class="u-editor")
                !=data.content

      include ../layouts/_Footer.pug
